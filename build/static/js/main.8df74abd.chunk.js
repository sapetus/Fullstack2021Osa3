(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n(14),o=n.n(r),a=n(3),c=n(0),i=function(e){return Object(c.jsxs)("div",{id:"filter-form",children:["Filter with:",Object(c.jsx)("input",{value:e.filter,onChange:function(t){e.setNewFilter(t.target.value)}})]})},u=n(4),l=n.n(u),d="/api/persons",m=function(){return l.a.get(d).then((function(e){return e.data}))},b=function(e){return l.a.post(d,e).then((function(e){return e.data}))},f=function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},j=function(e,t){return l.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},g=function(e){var t={color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},n={color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return Object(c.jsx)("div",{id:"add-person-form",children:Object(c.jsxs)("form",{onSubmit:function(s){s.preventDefault();var r={name:e.newName,number:e.newNumber};if(e.persons.some((function(t){return t.name.toLowerCase()===e.newName.toLowerCase()})))if(window.confirm("".concat(e.newName," is already added to phonebook, replace the old number with a new one?"))){var o=e.persons.filter((function(t){return t.name.toLowerCase()===e.newName.toLowerCase()}))[0].id;j(o,r).then((function(n){e.setPersons(e.persons.filter((function(e){return e.id!==o})).concat(n)),e.setMessageStyle(t),e.setMessage("".concat(e.newName," number changed")),setTimeout((function(){e.setMessage(null)}),3500)})).catch((function(t){e.setMessageStyle(n),e.setMessage("Information of ".concat(e.newName," has already been removed from server")),setTimeout((function(){e.setMessage(null)}),3500),e.setPersons(e.persons.filter((function(e){return e.id!==o})))})),e.setNewName(""),e.setNewNumber("")}else e.setNewName(""),e.setNewNumber("");else b(r).then((function(n){e.setPersons(e.persons.concat(n)),e.setMessageStyle(t),e.setMessage("Added ".concat(e.newName)),setTimeout((function(){e.setMessage(null)}),3500)})).catch((function(t){console.log(t.response.data),console.log("personName: ",r.name,"personNumber: ",r.number),""===r.name||""===r.number?(e.setMessageStyle(n),e.setMessage("Name and/or number missing")):(e.setMessageStyle(n),e.setMessage(t.response.data.error)),setTimeout((function(){e.setMessage(null)}),3500)})),e.setNewName(""),e.setNewNumber("")},children:[Object(c.jsxs)("div",{id:"name-input",children:["Name: ",Object(c.jsx)("input",{value:e.newName,onChange:function(t){e.setNewName(t.target.value)}})]}),Object(c.jsxs)("div",{id:"number-input",children:["Number: ",Object(c.jsx)("input",{value:e.newNumber,onChange:function(t){e.setNewNumber(t.target.value)}})]}),Object(c.jsx)("div",{id:"submit-button",children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})})},h=function(e){var t=e.person;return Object(c.jsxs)("p",{children:[t.name,": ",t.number]})},p=function(e){var t=e.persons,n=e.filter,s=e.setPersons,r=e.setMessage,o=e.setMessageStyle,a=function(e,t){return e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))}(t,n),i={color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return Object(c.jsx)("div",{id:"persons",children:a.map((function(e){return Object(c.jsxs)("div",{tag:"person",children:[Object(c.jsx)(h,{person:e}),Object(c.jsx)("button",{onClick:function(){return function(e){window.confirm("Are you sure you want to remove ".concat(e.name,"?"))&&(o(i),r("".concat(e.name," removed")),setTimeout((function(){r(null)}),3500),f(e.id),s(t.filter((function(t){return t.id!==e.id}))))}(e)},children:"Remove"})," ",Object(c.jsx)("br",{}),"--------------------------------------------------------"]},e.name)}))})},w=function(e){var t=e.message,n=e.style;return null===t?null:Object(c.jsx)("div",{className:"message",style:n,children:t})},N=function(){var e=Object(s.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],o=Object(s.useState)(""),u=Object(a.a)(o,2),l=u[0],d=u[1],b=Object(s.useState)(""),f=Object(a.a)(b,2),j=f[0],h=f[1],N=Object(s.useState)(""),O=Object(a.a)(N,2),v=O[0],x=O[1],y=Object(s.useState)(null),S=Object(a.a)(y,2),M=S[0],C=S[1],k=Object(s.useState)([]),P=Object(a.a)(k,2),L=P[0],T=P[1];return Object(s.useEffect)((function(){m().then((function(e){r(e)}))}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsx)(w,{message:M,style:L}),Object(c.jsx)(i,{filter:v,setNewFilter:x}),Object(c.jsx)("h2",{children:"Add a new person"}),Object(c.jsx)(g,{persons:n,setPersons:r,newName:l,setNewName:d,newNumber:j,setNewNumber:h,message:M,setMessage:C,messageStyle:L,setMessageStyle:T}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(p,{persons:n,filter:v,setPersons:r,setMessage:C,setMessageStyle:T})]})};n(38);o.a.render(Object(c.jsx)(N,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.8df74abd.chunk.js.map